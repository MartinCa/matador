\chapter{Test}\label{chap:test}
I forbindelse med CDIO del 2 er det meste af testningen foregået ved at vi har kørt spillet. Mens spillet kørte har vi kontrolleret at spillet udfører de rigtige handlinger i forhold til de værdier der bliver slået med terningerne.

Vi valgte dog at forsøge at lave en unittest for en klasse af spillet for at få lidt erfaring med udførelsen af unittests. Denne erfaring regner vi med at kunne drage god nytte af ved senere projekter. Vi valgte at implementere en unittest af \klasse{Die} da denne er den simpleste del af spillet. Se mere om denne i afsnit \vref{sec:test:unitTestDie}.

\section{Unittest af \klasse{Die}}\label{sec:test:unitTestDie}
Til unit test er JUnit anvendt som plugin til Eclipse. JUnit giver en række muligheder for at teste hvordan et program opfører sig. Til at lave mock's benyttes mockito som er et mocking framework. Til tests af \klasse{Die} er anvendt \textit{assertions}. Alle tests ligger i \klasse{TestDie}. Der er foretaget 2 typer af tests. I den første verificeres det, med \textit{assertTrue}, først at terningens værdi ligger i intervallet 1-6 (\vref{TestDie1-6}) og efterfølgende at terningen også kan oprettes med 200 sider. 

\begin{figure}
	\caption{Test terning \textit{facevalue} har interval 1-6}
	\label{TestDie1-6}
	\begin{lstlisting}
   	@Test
	public void testDie() {
		die1 = new Die();
		assertTrue(die1.getFacevalue() >=1 && die1.getFacevalue() <= 6);
    \end{lstlisting}
\end{figure}   

Den anden del af testen illustrerer en anden måde at opsætte testen på. Her laves et mock objekt af \klasse{Random} fra Java's standard API. Dette mock objekt bliver kodet til at returnere 3 når metoden \metode{nextInt()} kaldes med parameteren 6. Efterfølgende injiceres det mock'ede objekt i en instansiering af \klasse{Die}. Det er således nu muligt, at bestemme udfaldet af et kald til \klasse{Random}. Dermed kan det testes at den \klasse{Die} rent faktisk benytter \klasse{Random} til at bestemme værdien af \textit{facevalue}. Yderliere bruges \textit{verify} til at sikre at der har fundet et kald af \metode{Random.nextInt(6)} sted. Hele denne del af testen kan ses på \vref{TestRollDie}.

\begin{figure}
	\caption{Test \metode{rollDie()}}
	\label{TestRollDie}
	\begin{lstlisting}
	@Test
	public void testRollDie() {
		Random mockRand = mock(Random.class);
		when(mockRand.nextInt(6)).thenReturn(3);
		Die die = new Die(mockRand); 
		
		die.rollDie();
		
		assertTrue(die.getFacevalue() == 3+1);
		verify(mockRand).nextInt(6); 
    \end{lstlisting}
\end{figure}     