\tikzumlset{fill object=white,font=\tiny}
\begin{tikzpicture}
	\begin{umlseqdiag}
		\umlactor[x=-4]{Player}
		\umlobject[x=-2.5,class=Game]{game}
		\umlobject[x=0,class=Ownable]{ownable}
		\umlobject[x=2.7,class=Player,stereo=multi]{player}
		\umlobject[x=5,class=Konto]{konto}
		\umlobject[x=8]{BoundaryToPlayer}
		
		\begin{umlcall}[op={optToBuy(actField, actPlayer)}]{game}{game}
			\begin{umlcall}[op=isInstance(actField),return=bool ownable]{game}{ownable}
			
			\end{umlcall}
			\begin{umlfragment}[type=opt,label=ownable,inner xsep=0.2]
				\begin{umlcall}[op=getOwner(),return=Player owner]{game}{ownable}
				\end{umlcall}
				\begin{umlfragment}[type=opt,label={owner!=null},inner xsep=0.3]
					\begin{umlcall}[op=getKonto(),return=konto]{game}{player}				
					\end{umlcall}
					\begin{umlcall}[op=getBalance(),return=int balance]{game}{konto}					
					\end{umlcall}
					\begin{umlcall}[op=getPrice(),return=int price]{game}{ownable}
					\end{umlcall}
					\begin{umlfragment}[type=opt,label={balance>=price},inner xsep=0.3]
						\begin{umlcall}[op=opToBuy(),return= bool optToBuy]{game}{BoundaryToPlayer}
							\begin{umlcall}[op=getPlayerInt,return=int]{BoundaryToPlayer}{Player}
							
							\end{umlcall}
						
						\end{umlcall}
						\begin{umlfragment}[type=opt,label=optToBuy,inner xsep=0.2]
							\begin{umlcall}[op=buyField(actField),return=.]{game}{player}
								\begin{umlcall}[op=getPrice(),return=int price]{player}{ownable}
								
								\end{umlcall}
								\begin{umlcall}[op=withdraw(price)]{player}{konto}
								
								\end{umlcall}
								\begin{umlcallself}[op={ownedFields.add(actField)}]{player}
								
								\end{umlcallself}
							
							\end{umlcall}
						\end{umlfragment}
					\end{umlfragment}
				\end{umlfragment}
			\end{umlfragment}
		\end{umlcall}
	\end{umlseqdiag}
\end{tikzpicture}